<h1><%= @user.username %>
<% if current_user %>
  <% if @user.admin %>
    <span class="label label-info">Administrator</span>
  <% end %>
  <% if @user.banned %>
    <span class="label label-warning">Banned</span>
  <% end %>
  <% if @user == current_user %>
    <span class="label label-default">Current user</span>
  <% end %>
<% end %>
</h1>
<br>
<% if current_user %>
  <% if current_user.admin && @user != current_user %>
    <% if @user.banned %>
      <%= link_to "Remove ban", toggle_ban_user_path(@user.id), method: :post, class: "btn btn-danger" %>
    <% else %>
      <%= link_to "Ban #{@user.username}", toggle_ban_user_path(@user.id), method: :post, class: "btn btn-danger" %>
    <% end %>
  <% end %>
<% end %>
<p><% if @user.ratings.empty? %>
  No ratings.
  <% else %>
  <p>Has <%= pluralize(@user.ratings.count,'rating') %>, average <%= @user.average_rating.round(2) %>.</p>
  <p>Favorite beer: <%= link_to @user.favorite_beer, @user.favorite_beer %></p>
  <p> Favorite brewery: <%= link_to @user.favorite_brewery.name, @user.favorite_brewery %> </p>
  <p> Favorite style: <%= @user.favorite_style %> </p>
  <% end %>
</p>
<p><% if @user.beer_clubs.empty? %>
  No memberships.
  <% else %>
  Has <%= pluralize(@user.beer_clubs.count,'membership') %>.
  <% end %>
</p>
<% if !(@user.ratings.empty?) %>

	<h2>Ratings</h2>
<% end %>
<ul>
  <% @user.ratings.each do |rating| %>
    <li> <%= rating %>
    	<% if @user == current_user %>
	    	<%= link_to 'delete', rating, method: :delete, data: { confirm: 'Are you sure?' } %> 
	    <% end %>
    </li>
  <% end %>
</ul>
<% if !(@user.beer_clubs.empty?) %>
	<h2>Memberships</h2>
<% end %>
<ul>
 	<% @user.beer_clubs.each do |bc| %>
    	<li> <%= link_to bc, bc %></li>
	<% end %>
</ul>

<% if @user == current_user %>
	<%= link_to 'Edit', edit_user_path(@user), class:"btn btn-info" %> 
	<%= link_to 'Destroy', @user, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-danger" %> 
<% end %>
<%= link_to 'Back', users_path, class:"btn btn-info" %>
